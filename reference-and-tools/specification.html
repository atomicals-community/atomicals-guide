
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Specification Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Detailed Documentation of Atomicals Protocol">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="electrumx-api.html" />
    
    
    <link rel="prev" href="../faq.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../nfts/">
            
                <a href="../nfts/">
            
                    
                    NFTs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../nfts/normal-transfer-rules.html">
            
                <a href="../nfts/normal-transfer-rules.html">
            
                    
                    Normal Transfer Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../nfts/swap-transfer-rules.html">
            
                <a href="../nfts/swap-transfer-rules.html">
            
                    
                    Swap Transfer Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../nfts/splat-operation.html">
            
                <a href="../nfts/splat-operation.html">
            
                    
                    Splat Operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../arc20-tokens/">
            
                <a href="../arc20-tokens/">
            
                    
                    ARC20 Tokens
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../arc20-tokens/normal-transfer-rules.html">
            
                <a href="../arc20-tokens/normal-transfer-rules.html">
            
                    
                    Normal Transfer Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../arc20-tokens/swap-transfer-rules.html">
            
                <a href="../arc20-tokens/swap-transfer-rules.html">
            
                    
                    Swap Transfer Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../arc20-tokens/substantiation-factor.html">
            
                <a href="../arc20-tokens/substantiation-factor.html">
            
                    
                    Substantiation Factor
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../collection-containers/">
            
                <a href="../collection-containers/">
            
                    
                    Collection Containers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../collection-containers/dmint-guide.html">
            
                <a href="../collection-containers/dmint-guide.html">
            
                    
                    DMINT Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../realm-names/">
            
                <a href="../realm-names/">
            
                    
                    Realm Names
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../realm-names/payname-format.html">
            
                <a href="../realm-names/payname-format.html">
            
                    
                    Payname Format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../realm-names/mint-sub-realms.html">
            
                <a href="../realm-names/mint-sub-realms.html">
            
                    
                    Mint Sub-Realms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../rules-subrealms-and-dmint.html">
            
                <a href="../rules-subrealms-and-dmint.html">
            
                    
                    Rules (Subrealms & DMINT)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../bitwork-mining.html">
            
                <a href="../bitwork-mining.html">
            
                    
                    Bitwork Mining
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../recursion-and-references.html">
            
                <a href="../recursion-and-references.html">
            
                    
                    Recursion and References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../permanent-file-storage.html">
            
                <a href="../permanent-file-storage.html">
            
                    
                    Permanent File Storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../first-is-first-candidate-system.html">
            
                <a href="../first-is-first-candidate-system.html">
            
                    
                    First is First Candidate System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../faq.html">
            
                <a href="../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Reference & Tools</li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="specification.html">
            
                <a href="specification.html">
            
                    
                    Specification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="electrumx-api.html">
            
                <a href="electrumx-api.html">
            
                    
                    ElectrumX API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="javascript-library-cli.html">
            
                <a href="javascript-library-cli.html">
            
                    
                    Javascript Library (CLI)
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Specification</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="specification">Specification</h1>
<p>The heart of Atomicals Protocol is a <strong>few simple rules</strong> to follow for mint, transfer, update, delete and extract operations.
After getting acquainted with the theory, jump to <a href="javascript-library-cli.html">minting your first Atomical Digital Object</a> in a few minutes</p>
<h2 id="&#x26A0;&#xFE0F;warning-the-specification-is-defined-in-code-review-the-commands-in-the-atomicals-js-cli-to-see-how-they-function-accurately">&#x26A0;&#xFE0F;Warning: The specification is defined in code. Review the commands in the <a href="https://github.com/atomicals/atomicals-js/tree/master/lib/commands" target="_blank">atomicals-js CLI</a> to see how they function accurately.</h2>
<h2 id="envelope">Envelope</h2>
<p>All methods follows a &quot;commit and reveal&quot; scheme leveraging Taproot (P2TR) spend path scripts. In the witness script for an input, we put the Atomicals envelope which will contain the various operations that can be legally performed on an Atomical.</p>
<p>The convention is to use an <code>OP_FALSE OP_IF ... OP_ENDIF</code> to place arbitrary non-executable content in a witness spend script. We use the bytes of &quot;<em>atom</em>&quot; (<code>61746F6D</code> in hex) to indicate this envelope belongs to the Atomicals Protocol.</p>
<pre><code>OP_FALSE
OP_IF
 0x0461746F6D // Push &quot;atom&quot; 4 bytes
 &lt;Operation&gt;  // Followed by a single push to denote the operation type
 &lt;Payload&gt;    // Payload (CBOR encoded) for the operation
OP_ENDIF
</code></pre><p>The envelope can appear anywhere in the spend script, but it is recommended to put it after a pay-to-pubkey-hash (p2pkh), which would actually be:</p>
<pre><code>&lt;pubkey-hash&gt;
OP_CHECKSIG     // Perform a check signature against the pubkey-hash
OP_FALSE
OP_IF
 0x0461746F6D // Push &quot;atom&quot; 4 bytes
 &lt;Operation&gt;  // Followed by a single push to denote the operation type
 &lt;Payload&gt;    // Payload (CBOR encoded) for the operation
OP_ENDIF
</code></pre><p>The format of the <code>&lt;Operation&gt;</code> field is a single push data representing the type of operation that follows. The <code>&lt;Payload&gt;</code> data is interpreted in the context of the operation type. The <code>&lt;Payload&gt;</code> is a <a href="https://cbor.io/" target="_blank">CBOR</a> encoded data structure and can be decoded in a variety of programming languages. CBOR provides a concise and expressive way to encode data and greatly simplifies parsing Atomicals protocol operations since there are only push datas that contain the necessary information for all the files and their metadata. </p>
<h2 id="payload-format-description"><strong>Payload Format Description</strong></h2>
<p>The payload format is intuitive and simple: Each top-level field is a file (or field) name and below it can be any valid JSON-like structure. In the case that there is a <code>&quot;ct&quot;</code> (content-type) field in the payload, then it is interpreted to be a file of that type with the bytes located at <code>&quot;d&quot;</code></p>
<p>The payload is <a href="https://cbor.io/" target="_blank">CBOR encoded</a> and can be of any size in a single push data up to 520 bytes. If the payload is larger, then include subsequent push datas of size 520. It is understood that parsers will concatenate all chunks together and then perform a CBOR decode to obtain the data structure.</p>
<p>If any point the payload is not CBOR encoded compliant, then it is assumed there is no data associated the NFT. The absence of a Payload field is valid, but also merely indicates there is no data. Some digital objects may not have explicit payload data as part of their mint event.</p>
<p>A final note is that any field with a sub-key <code>&quot;ct&quot;</code> (content-type) is assumed to be a file if and only if the <code>&quot;d&quot;</code> bytes are also provided. If they are not provided, then the field is treated as a non-file metadata field.</p>
<h3 id="sample-payload-format">Sample Payload Format</h3>
<pre><code>  {
    &quot;someimage.png&quot;: &quot;binary data&quot;,
    &quot;meta&quot;: {
      &quot;some&quot;: &quot;value&quot;,
      &quot;another: {
        &quot;fieldabc&quot;: 123
      }
    },
    &quot;args&quot;: {
      &quot;r&quot;: &quot;abc&quot;
    }
  }
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../faq.html" class="navigation navigation-prev " aria-label="Previous page: FAQ">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="electrumx-api.html" class="navigation navigation-next " aria-label="Next page: ElectrumX API">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"description":"Detailed Documentation of Atomicals Protocol","title":"Specification","level":"2.1","depth":1,"next":{"title":"ElectrumX API","level":"2.2","depth":1,"path":"reference-and-tools/electrumx-api.md","ref":"reference-and-tools/electrumx-api.md","articles":[]},"previous":{"title":"FAQ","level":"1.11","depth":1,"path":"faq.md","ref":"faq.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"reference-and-tools/specification.md","mtime":"2024-05-07T03:27:46.849Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-05-07T03:28:11.016Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

